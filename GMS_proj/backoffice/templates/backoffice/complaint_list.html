{% extends 'backoffice/navigation_admin.html' %}
   {% block content %}
    {% load static %}
   

<div class="container">
  <div class="row justify-content-center">
    <h1 class="text-center">Complaints List</h1>
    <div class="col-md-10">
        <div class="table-wrapper">
      <table id="example" class="table table-striped table-bordered">
        <thead>
          <tr>
            <th scope="col"style="width:10vw;">S No</th>
            <th scope="col"style="width:15vw;">Name</th>
            <th scope="col"style="width:10vw;">Phone No</th>
            <th scope="col" style="width:40vw; text-align: center;">Current Handler</th>
            <th scope="col"style="width:10vw;">created_at</th>
            <th scope="col"style="width:10vw;">updated_at</th>
            <th scope="col"style="width:10vw;">Sentiment</th>
            <th scope="col"style="width:10vw;">Actions</th>
          </tr>
        </thead>
        {% for  complaint in complaints %}
        <tr>
          <td>{{forloop.counter}}</td>
          <td>{{complaint.profile.name}}</td>
          <td>{{complaint.profile.mobile}}</td>
          <td>{{complaint.current_handler}}</td>
          <td>{{complaint.created_at}}</td>
          <td>{{complaint.updated_at}}</td>
          <td>{{complaint.sentiment}}</td>
          <td>
            <div class="btn-group" role="group" aria-label="Basic example">
              <button type="button" class="btn btn-primary" onclick="showProfile1({{ complaint.id }})" >
                <i class="far fa-eye"></i>
              </button>

              <div class="btn-group" role="group" aria-label="Basic example">
                <button type="button" class="btn btn-success" onclick="showComplaint({{ complaint.id }})" >
                  <i class="fa-solid fa-reply"></i>
                </button>

              <button type="button" class="btn btn-danger" onclick="deleteProfile({{ complaint.profile.id }})"><i class="far fa-trash-alt"></i></button>
            </div>
          </td>
         
        </tr>
        {% endfor %}
      </table>
    </div>

                </div>
            </div>
        </div>
    </div>
    <script>
      function showProfile1(complaint_id) {
          // Redirect to the detail page with employeeId
          window.location.href = "{% url 'backoffice:complaints' operation='view' %}?id=" + complaint_id;
      }
      function showComplaint(complaint_id) {
        // Redirect to the detail page with employeeId
        window.location.href = "{% url 'backoffice:complaints' operation='message' %}?id=" + complaint_id;
    }
    function deleteProfile(complaint_id) {
      // Redirect to the detail page with employeeId
      window.location.href = "{% url 'backoffice:complaints' operation='delete' %}";
  }
  </script>
 {% endblock %}